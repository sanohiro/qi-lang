# Qi ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒæ‹¡å¼µæ¡ˆ

## ğŸ¯ ç›®çš„
- æ§‹é€ çš„ãƒ‡ãƒ¼ã‚¿ï¼ˆãƒã‚¹ãƒˆã€è¤‡æ•°ã‚­ãƒ¼ã€ãƒªã‚¹ãƒˆæ§‹é€ ï¼‰ã‚’ã‚ˆã‚Šç°¡æ½”ã«æ›¸ã‘ã‚‹
- ã‚¬ãƒ¼ãƒ‰æ¡ä»¶ã‚„æŸç¸›ã‚’æŸ”è»ŸåŒ–
- è¤‡é›‘ãªåˆ†å²ã‚’ç›´æ„Ÿçš„ã«è¨˜è¿° â†’ å¤§ããªé–¢æ•°ã‚’å®‰å…¨ã«åˆ†è§£

---

## 1. `as` æŸç¸›ï¼ˆãƒ‘ã‚¿ãƒ¼ãƒ³å…¨ä½“ã‚’å¤‰æ•°ã«ï¼‰
ç¾åœ¨ï¼š
```lisp
(match data
  {:user {:name n :age a}} -> (str n a))
```
æ‹¡å¼µï¼š
```lisp
(match data
  {:user {:name n :age a} :as u} -> (save u))
```
- `:as var` ã§ãƒ‘ã‚¿ãƒ¼ãƒ³ã®å®Œå…¨ä¸€è‡´éƒ¨åˆ†ã‚’ä¸¸ã”ã¨æŒã£ã¦ãŠã‘ã‚‹
- ãƒ‡ãƒãƒƒã‚°ã‚„å†åˆ©ç”¨ã«ä¾¿åˆ©

---

## 2. ãƒã‚¹ãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³ + ã‚¬ãƒ¼ãƒ‰
æ‹¡å¼µï¼š
```lisp
(match data
  {:user {:name n :age a}} when (> a 18) -> (adult n)
  {:user {:name n :age a}} when (< a 0) -> (error "invalid age")
  _ -> (unknown))
```
- ãƒã‚¹ãƒˆã¨ `when` ã‚’ç›´æ›¸ãã—ã¦ã‚‚å¯èª­æ€§ã‚’ç¶­æŒ

---

## 3. è¤‡æ•°æ¡ä»¶ï¼ˆor / andï¼‰
```lisp
(match x
  (1 or 2 or 3) -> "low"
  (4 and (> y 10)) -> "special case"
  _ -> "other")
```
- å€¤ã‚„å¼ã‚’æŸã­ã¦è¤‡åˆæ¡ä»¶

---

## 4. éƒ¨åˆ†ä¸€è‡´ï¼ˆwildcardsï¼‰
```lisp
(match data
  {:user {:name _ :age a}} -> (log a))
```
- `_` ã¯ä»»æ„å€¤ã«ãƒãƒƒãƒ
- é–¢å¿ƒã®ã‚ã‚‹éƒ¨åˆ†ã ã‘æŠ½å‡ºå¯èƒ½

---

## 5. ãƒãƒƒãƒä¸­å¤‰æ›ï¼ˆ`=>`ï¼‰
```lisp
(match data
  {:price p => parse-float} -> (calc-tax p)
  {:name n => lower} -> (log n))
```
- æŸç¸›æ™‚ã«ç›´æ¥å¤‰æ›é–¢æ•°ã‚’é©ç”¨
- å‰å‡¦ç†ãŒä¸è¦ã«ãªã‚Šãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³çš„

---

## 6. è¤‡æ•°ãƒãƒƒãƒæŸç¸›
```lisp
(match data
  [{:id id1} {:id id2}] -> (compare id1 id2))
```
- ãƒªã‚¹ãƒˆã‚„ãƒ™ã‚¯ã‚¿ã§è¤‡æ•°è¦ç´ ã‚’åŒæ™‚æŸç¸›å¯èƒ½

---

## 7. ãƒãƒƒãƒå¼ã®æˆ»ã‚Šå€¤å¼·åŒ–
```lisp
(match data
  0 -> {:type :zero}
  n when (> n 0) -> {:type :positive :val n}
  _ -> {:type :other})
```

---

## 8. å®Ÿè£…ãƒ¡ãƒ¢ï¼ˆQiçš„æ›¸ãã‚„ã™ã•æ„è­˜ï¼‰
- ã‚³ã‚¢ã¯æ—¢å­˜ `match` ã®ã¾ã¾æ§‹æ–‡ç³–è¡£ã‚’è¿½åŠ ã™ã‚‹ãƒã‚¯ãƒ­ç¾¤ã§å¯¾å¿œå¯èƒ½
- `as` ã‚„ `=>` ã¯ãƒã‚¯ãƒ­å±•é–‹æ™‚ã«ãƒ‘ã‚¿ãƒ¼ãƒ³è§£æã—ã¦æŸç¸›ã‚’è¿½åŠ 
- `(or â€¦)`, `(and â€¦)` ã¯è¤‡æ•°ã‚¬ãƒ¼ãƒ‰å¼ã¸å±•é–‹

---

## ğŸ“„ ææ¡ˆä»•æ§˜ã¾ã¨ã‚è¡¨

| æ©Ÿèƒ½ | æ§‹æ–‡ä¾‹ | åŠ¹æœ |
|------|-------|------|
| asæŸç¸› | `{:a x :as whole}` | éƒ¨åˆ†ã¨å…¨ä½“ã‚’ä¸¡æ–¹ä½¿ãˆã‚‹ |
| ãƒã‚¹ãƒˆ+ã‚¬ãƒ¼ãƒ‰ | `{:u {:a a}} when (> a 0)` | ãƒã‚¹ãƒˆæ§‹é€ ã«ã‚‚æ¡ä»¶OK |
| è¤‡æ•°æ¡ä»¶ | `(1 or 2)` / `(and (> x 0) (< x 10))` | æ¡ä»¶è«–ç†æ¼”ç®— |
| ãƒ¯ã‚¤ãƒ«ãƒ‰ã‚«ãƒ¼ãƒ‰ | `_` | ä»»æ„å€¤ã‚’ã‚¹ã‚­ãƒƒãƒ— |
| ãƒãƒƒãƒä¸­å¤‰æ› | `=> fn` | æŸç¸›æ™‚ã«å¤‰æ› |
| è¤‡æ•°æŸç¸› | `[x y]` | é…åˆ—è¦ç´ ã®åŒæ™‚æŸç¸› |
| æˆ»ã‚Šã‚¿ã‚° | `-> {:type â€¦}` | åˆ†å²çµæœã«ç¨®é¡ä»˜ä¸ |